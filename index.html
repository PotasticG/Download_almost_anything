<!DOCTYPE html>
<html>
<head>
    <title>Enhanced Direct Download Search Tool</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <style type="text/css">
        .black-background { background-color: #000000; }
        .white { color: #ffffff; }
    </style>
</head>
<body>
<div class="container">
    <h1 align="center">Enhanced Direct Download Search Tool</h1>
    <form id="searchForm" onsubmit="event.preventDefault(); startSearch();">
        <input type="hidden" name="fileType" value="" id="fileType">
        <input type="hidden" name="engine" value="google" id="engine">
        <div class="row" align="center">
            <div class="col-lg-8 col-lg-offset-2">
                <div class="input-group">
                    <div class="input-group-btn">
                        <button id="ddbutton" type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">Choose Filetype <span class="caret"></span></button>
                        <ul class="dropdown-menu">
                            <!-- Filetype options -->
                        </ul>
                    </div>
                    <input type="text" name="query" id="query" class="form-control" placeholder="Search anything e.g The.Blacklist.S01.E01">
                    <span class="input-group-btn">
                        <button onclick="startSearch();" class="btn btn-default black-background white"><span class="glyphicon glyphicon-search"></span></button>
                    </span>
                </div>
                <div class="input-group">
                    <input type="checkbox" id="filterCheckbox" name="filter" value="filter"> Filter Results
                </div>
            </div>
        </div>
    </form>
</div>

<script type="text/javascript">
    function setFiletype(fileType, buttonText, glyph) {
        var defaultString = 'Search anything';
        if (fileType == -1) { fileType = ""; }
        var placeholderText = {
            'film': defaultString + ' e.g. The.Blacklist.S01',
            'music': defaultString + ' e.g. K.Flay discography',
            'book': defaultString + ' e.g. 1984',
            'cd': defaultString + ' e.g. GTA V',
            'picture': defaultString + ' e.g. Donald Trump',
            'asterisk': defaultString
        };
        $("#query").prop('placeholder', placeholderText[glyph]);
        $("#fileType").prop('value', fileType);
        $("#ddbutton").html('<span class="glyphicon glyphicon-' + glyph + '" aria-hidden="true"></span> ' + buttonText + ' <span class="caret"></span>');
        $("#query").focus();
    }

    function startSearch() {
        var query = document.getElementById('query').value;
        var fileType = document.getElementById('fileType').value;
        var engine = document.getElementById('engine').value;
        var filter = document.getElementById('filterCheckbox').checked;
        var filterString = filter ? "-site:example.com -site:anotherexample.com" : "";

        var finalQuery = query + " " + fileType + " " + filterString + " intitle:index.of -inurl:(jsp|pl|php|html|aspx|htm|cf|shtml) -inurl:(listen77|mp3raid|mp3toss|mp3drug|index_of|index-of|wallywashis|downloadmana)";

        var url = "";
        switch (engine) {
            case 'google':
                url = "https://www.google.com/search?q=" + encodeURIComponent(finalQuery);
                break;
            // Additional search engines
        }
        window.open(url, '_blank');
    }
</script>
</body>
</html>
